{
  "version": 3,
  "sources": ["../../../../typescript-e-commerce/functions/products.ts"],
  "sourceRoot": "C:/Users/mohan/AppData/Local/Temp/tmp-18436-jkc03cyOxKBO",
  "sourcesContent": ["// [domain]/.netlify/functions/products\r\n// This serverless function fetches products from Sanity CMS\r\n\r\nimport { Handler } from '@netlify/functions'\r\nimport https from 'https'\r\n\r\nconst SANITY_PROJECT_ID = 'j3gfzmh0'\r\nconst SANITY_DATASET = 'production'\r\nconst SANITY_API_VERSION = '2024-01-01'\r\n\r\nconst PRODUCTS_QUERY = encodeURIComponent(`*[_type == \"product\"]{\r\n  \"id\": _id,\r\n  name,\r\n  \"slug\": slug.current,\r\n  brand,\r\n  categories,\r\n  clothingCategories,\r\n  price,\r\n  stock,\r\n  forWhom,\r\n  itemDescription,\r\n  featured,\r\n  \"images\": imageUrls\r\n}`)\r\n\r\nconst handler: Handler = async () => {\r\n  try {\r\n    const url = `https://${SANITY_PROJECT_ID}.api.sanity.io/v${SANITY_API_VERSION}/data/query/${SANITY_DATASET}?query=${PRODUCTS_QUERY}`\r\n    \r\n    const response = await fetch(url)\r\n    const data = await response.json()\r\n    \r\n    return {\r\n      statusCode: 200,\r\n      body: JSON.stringify(data.result),\r\n      headers: { 'Content-Type': 'application/json' },\r\n    }\r\n  } catch (err: any) {\r\n    return {\r\n      statusCode: 500,\r\n      body: JSON.stringify({ msg: 'Failed to load products', error: err?.message }),\r\n    }\r\n  }\r\n}\r\n\r\nexport { handler }\r\n"],
  "mappings": ";;;;;;;;;AAAA;AAAA;AAAA;AAMA,IAAM,oBAAoB;AAC1B,IAAM,iBAAiB;AACvB,IAAM,qBAAqB;AAE3B,IAAM,iBAAiB,mBAAmB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAe1C,IAAM,UAAmB,YAAY;AACnC,MAAI;AACF,UAAM,MAAM,WAAW,oCAAoC,iCAAiC,wBAAwB;AAEpH,UAAM,WAAW,MAAM,MAAM;AAC7B,UAAM,OAAO,MAAM,SAAS;AAE5B,WAAO;AAAA,MACL,YAAY;AAAA,MACZ,MAAM,KAAK,UAAU,KAAK;AAAA,MAC1B,SAAS,EAAE,gBAAgB;AAAA;AAAA,WAEtB,KAAP;AACA,WAAO;AAAA,MACL,YAAY;AAAA,MACZ,MAAM,KAAK,UAAU,EAAE,KAAK,2BAA2B,OAAO,2BAAK;AAAA;AAAA;AAAA;",
  "names": []
}
